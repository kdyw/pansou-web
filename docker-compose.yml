version: '3.8'

services:
  pansou:
    image: ghcr.io/fish2018/pansou-web:latest
    container_name: pansou-app
    ports:
      - "8080:8080"
      - "8443:8443"
    environment:
      # 基础配置
      - DOMAIN=localhost
      - PANSOU_PORT=8888
      - PANSOU_HOST=127.0.0.1
      
      # Telegram频道配置（镜像已包含这些默认频道，如需自定义可取消注释）
      # - CHANNELS=tgsearchers3,yunpanxunlei,tianyifc,BaiduCloudDisk,txtyzy,peccxinpd,gotopan,xingqiump4,yunpanqk,PanjClub,kkxlzy,baicaoZY,MCPH01,share_aliyun,bdwpzhpd,ysxb48,jdjdn1111,yggpan,MCPH086,zaihuayun,Q66Share,NewAliPan,ypquark,Oscar_4Kmovies,ucwpzy,alyp_TV,alyp_4K_Movies,shareAliyun,alyp_1,dianyingshare,Quark_Movies,XiangxiuNBB,NewQuark,ydypzyfx,kuakeyun,ucquark,xx123pan,yingshifenxiang123,zyfb123,tyypzhpd,tianyirigeng,cloudtianyi,hdhhd21,Lsp115,oneonefivewpfx,Maidanglaocom,qixingzhenren,taoxgzy,tgsearchers115,Channel_Shares_115,tyysypzypd,vip115hot,wp123zy,yunpan139,yunpan189,yunpanuc,yydf_hzl,alyp_Animation,alyp_JLP,leoziyuan
      
      # 代理配置（可选）
      # - PROXY=socks5://127.0.0.1:1080
      # - PROXY=http://proxy:8080
      # - PROXY=https://proxy:8080
      
      # 性能配置（镜像已包含默认值，如需调整可取消注释）
      # - CACHE_ENABLED=true
      # - CACHE_TTL=3600
      # - MAX_CONCURRENCY=200
      # - MAX_PAGES=30
    volumes:
      # 数据持久化
      - pansou-data:/app/data
      - pansou-logs:/app/logs
      # SSL证书（可选）
      # - ./ssl:/app/data/ssl
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

volumes:
  pansou-data:
    driver: local
  pansou-logs:
    driver: local

# 网络配置（可选）
# networks:
#   pansou-network:
#     driver: bridge
